# IOMMU groups

At the directory `/sys/kernel/iommu_groups`, this is the directory generated by the iommu driver. If you don't find it, you may need to check the two things:

1. The `CONFIG_INTEL_IOMMU_DEFAULT_ON`, if set this config, the iommu will be default on.
2. If not set the `CONFIG_INTEL_IOMMU_DEFAULT_ON`, add `intel_iommu=on` can make the iommu on.

So after open the iommu, we can see `/sys/kernel/iommu_groups` directory. What's the stuff in the directory?

```C
/sys/kernel/iommu_groups$ ls
0  1  10  2  3  4  5  6  7  8  9
```

There only have some numbers, each one of them is a iommu group that is divided by the iommu, a group may contain more than one devices. And as we know in the VFIO driver, it can only operate the iommu if all of the device in a group is binded to the vfio_pci driver.

And let's what has in these directory, let's see the group 4:

```C
devices/  reserved_regions  type
```

It has three file, once of them is a directory `devices`, the `devices` stores linker of all devices belongs to the group, let's see:

```C
/sys/kernel/iommu_groups$ ls -l 4/devices/
total 0
lrwxrwxrwx 1 root root 0 Oct 10 02:54 0000:00:14.0 -> ../../../../devices/pci0000:00/0000:00:14.0
lrwxrwxrwx 1 root root 0 Oct 10 02:54 0000:00:14.2 -> ../../../../devices/pci0000:00/0000:00:14.2
```

There are two devices in the group.

So we need to bind all the device in the group 4 to the vfio_pci driver, then we can passthrough it to the guest. Otherwise it will failed, due to the minimal suit we can operate is the iommu group.